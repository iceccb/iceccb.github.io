<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Ice&#39;s Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description">
<meta property="og:type" content="website">
<meta property="og:title" content="Ice's Blog">
<meta property="og:url" content="http://iceccb.github.io/page/2/index.html">
<meta property="og:site_name" content="Ice's Blog">
<meta property="og:description">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Ice's Blog">
<meta name="twitter:description">
  
    <link rel="alternative" href="/atom.xml" title="Ice&#39;s Blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
<!--   <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css"> -->
  <link rel="stylesheet" href="/css/style.css" type="text/css">
  

</head>
<body>
  <div id="container">
    <div id="wrap">
      
<header id="header">
  <div id="header-outer" class="outer">
    
    <div id="header-inner" class="inner">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Ice&#39;s Blog</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">everything will be ok</a>
        </h2>
      
    </div>
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">首页</a>
        
          <a class="main-nav-link" href="/archives">博文</a>
        
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
      </nav>
      <nav id="sub-nav">
        
      </nav>
      
    </div>
  </div>
  <!--fork me on github-->
  <!--<a href="https://github.com/iceccb" id="fork-me-link"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://camo.githubusercontent.com/38ef81f8aca64bb9a64448d0d70f1308ef5341ab/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f6461726b626c75655f3132313632312e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png"></a>-->
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-suibi-20160203" class="article article-type-post" itemscope itemprop="blogPost">
  
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/02/03/suibi-20160203/">如果自杀的话</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      <a href="/2016/02/03/suibi-20160203/" class="article-date">
  <time datetime="2016-02-03T15:27:18.000Z" itemprop="datePublished">2月 3 2016</time>
</a>
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/随笔/">随笔</a></li></ul>

      
<a href="/2016/02/03/suibi-20160203/#comments" class="article-comment-link" data-thread-key="cilpbrf620013sgvgbzgiejy7" data-short-name="iceccb" style="display:none">comments</a>

    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p>咋一看题目，这应该是一封遗书。如果是遗书的话，你们就看不到此文了。前阵子突然想到这个诡异的问题，“如果自杀，我需要做些什么？”如果你一定要问我为什么要考虑这个问题，是否有那么一瞬间想要自杀，那这是个诙谐的指控。如果你看到报道说马云身家几百亿，你或许会想，这么多钱他该怎么花，但不说明你也有这么多钱。如果你看到哪个宇航员在太空待了多久后，你可能会想，他在上面怎么排泄，但这不证明你也想在地球外大小便。举了两个无趣的例子，似乎无法让你撤销对我的指控。无妨，哲学家、思想家就喜欢没事思考生与死的问题，而我是个没事喜欢胡思乱想的呆子。这个问题在我脑子里萦绕了很久，终于还是打算把它当“遗书”写下来，不管行文是否流畅，不管是否把想法讲清楚。</p>
        
          <p class="article-more-link">
            <a href="/2016/02/03/suibi-20160203/#more">继续阅读</a>
          </p>
        
      
    </div>
    
  </div>
  
</article>






  
    <article id="post-suibi-20160130" class="article article-type-post" itemscope itemprop="blogPost">
  
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/01/30/suibi-20160130/">男女的友谊-当哈利遇上莎莉</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      <a href="/2016/01/30/suibi-20160130/" class="article-date">
  <time datetime="2016-01-30T15:25:23.000Z" itemprop="datePublished">1月 30 2016</time>
</a>
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/电影/">电影</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/随笔/">随笔</a></li></ul>

      
<a href="/2016/01/30/suibi-20160130/#comments" class="article-comment-link" data-thread-key="cilpbrf660016sgvgdnsnz1of" data-short-name="iceccb" style="display:none">comments</a>

    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p>有一部电影常常听人说起，这么一部经典的电影经常与男女之间的友谊扯上关系。作为电影爱好者的我却一直没看，在艳阳天的周末，一个人静静的欣赏了这部好片“当哈利遇到莎莉”。</p>
<p>大学毕业后莎莉和哈利结伴驱车到纽约，两人由此相识，但却是一个糟糕的开始。途中两人言语相左，成为对方讨厌的人，到纽约后两人得出不可能成为朋友的结论后，不欢而散。也由此引出经典的男女问题，排除性男女之间是否有纯友谊。</p>
<p>男女之间是否存在纯友谊？这个问题被人反复讨论了无数次，跟大多数问题一样没有定论，相信和不相信者自由其理论。此命题首先界定了主体为两个异性的人类，但我想先将命题变换为两个同性的主体。同性之间是否存在纯友谊？</p>
        
          <p class="article-more-link">
            <a href="/2016/01/30/suibi-20160130/#more">继续阅读</a>
          </p>
        
      
    </div>
    
  </div>
  
</article>






  
    <article id="post-suibi-20160123" class="article article-type-post" itemscope itemprop="blogPost">
  
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/01/23/suibi-20160123/">谎言</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      <a href="/2016/01/23/suibi-20160123/" class="article-date">
  <time datetime="2016-01-23T15:22:53.000Z" itemprop="datePublished">1月 23 2016</time>
</a>
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/话剧/">话剧</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/随笔/">随笔</a></li></ul>

      
<a href="/2016/01/23/suibi-20160123/#comments" class="article-comment-link" data-thread-key="cilpbrf69001asgvg09rkqxct" data-short-name="iceccb" style="display:none">comments</a>

    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="chapter-1"><a href="#chapter-1" class="headerlink" title="chapter 1"></a>chapter 1</h1><p>阿香从小喜欢说谎，她在每次说谎中得到乐趣得到满足，即使母亲都打骂教育她不能说谎，但她总是左耳进右耳出。一天，她见好友买了新鞋便欺骗对方父亲也给她买了，只是过几天才能穿。她在河边找到了正在垂钓的父亲，想问父亲拿钱，在父亲的追问下道出想买鞋的实情，还说父亲上次答应了考100分就可以买鞋。父亲问她把考卷拿出来看，她支支吾吾把考卷拿出来但却不肯给父亲看，最后特意扔进湖。阿香和父亲的感情很好，在打闹嬉笑中父女之情表露无遗。父亲笑着说我帮你捡起来随之跳进湖里，却再也没起来过。当然阿香没考100，当然阿香没想到一个小小的谎言葬送了父亲的性命，当然阿香无法原谅自己。从此阿香不再说谎，她母亲也是个不说谎的人，只是阿香无法向任何人说真话父亲是自己害死的。说真话的阿香不再是以前受人欢迎的那个嘴巴甜的姑娘，长大后阿香要去城市里，母亲告诉她城里是个没有谎言、充满真理的地方。阿香告别母亲，前往那个没有谎言的地方。可是前途未知，阿香不知道，世上根本不存在没有谎言的地方。</p>
        
          <p class="article-more-link">
            <a href="/2016/01/23/suibi-20160123/#more">继续阅读</a>
          </p>
        
      
    </div>
    
  </div>
  
</article>






  
    <article id="post-book-review-20160119" class="article article-type-post" itemscope itemprop="blogPost">
  
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/01/19/book-review-20160119/">《异乡人》读后感</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      <a href="/2016/01/19/book-review-20160119/" class="article-date">
  <time datetime="2016-01-19T15:18:53.000Z" itemprop="datePublished">1月 19 2016</time>
</a>
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/读后感/">读后感</a></li></ul>

      
<a href="/2016/01/19/book-review-20160119/#comments" class="article-comment-link" data-thread-key="cilpbrf7d002osgvgwobp8s6l" data-short-name="iceccb" style="display:none">comments</a>

    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="chapter-1"><a href="#chapter-1" class="headerlink" title="chapter 1"></a>chapter 1</h1><p>广州已经持续了几日的阴雨天气，今天终于悄然退出。清晨仍是乌云密布的样子，让人们在期盼的周末到来时，望着阴暗的天空，感受甚是丧气。当以为又要窝在家消磨时光，阳光终于还是耐不住寂寞，拨开遮挡在他眼前的云障，用其温暖的力量再次统治大地。广州的冬天像是秋天，有时又让人以为春天已经不知不觉到来，沐浴在和煦的阳光中，是我今天必须做的，这样的力量这样的温暖，再坚硬的墙也无法抵挡如此激烈的欲望。</p>
<h1 id="chapter-2"><a href="#chapter-2" class="headerlink" title="chapter 2"></a>chapter 2</h1><p>恰巧有事需要来天河这边一趟，当我把事结了后，想起有家书店一直想去，就步行道天河北的这家1200bookshop。开在繁华的地段，无需走上几段幽静，意外的是整条街上的建筑和商店都给人清新恬静的感觉，而书店就在显眼的地方，让我不禁想起小隐隐于林，大隐隐于市。在广州生活这么多年，好像第一次发现，或许是以前路过却不留意吧，又或许在我离开的这五年，发生了许许多多的变化，难道不是吗？世上不缺少美的地方，只是少有发现美的眼睛，也缺少寻找美的自然心境。走进书店，一排排棕色木质的书架，满满各式各样的书，人不多，大多坐在桌旁静静的阅读或虚席，我知道我来对地方了。不像方所的拥挤，想起上次去方所看到都是人头，就没有走进的欲望。聊聊数人如我般徘徊在书架边，随手拿起一本书，看上一段。耳边是淡淡的音乐声和沙沙的翻书声，这是独属于书店的协奏曲，静谧而空灵。</p>
        
          <p class="article-more-link">
            <a href="/2016/01/19/book-review-20160119/#more">继续阅读</a>
          </p>
        
      
    </div>
    
  </div>
  
</article>






  
    <article id="post-suibi-20160118" class="article article-type-post" itemscope itemprop="blogPost">
  
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/01/18/suibi-20160118/">我为什么阅读</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      <a href="/2016/01/18/suibi-20160118/" class="article-date">
  <time datetime="2016-01-18T14:53:31.000Z" itemprop="datePublished">1月 18 2016</time>
</a>
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/随笔/">随笔</a></li></ul>

      
<a href="/2016/01/18/suibi-20160118/#comments" class="article-comment-link" data-thread-key="cilpbrf6c001fsgvgxkrwm2n5" data-short-name="iceccb" style="display:none">comments</a>

    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="chapter-1"><a href="#chapter-1" class="headerlink" title="chapter 1"></a>chapter 1</h1><p>拖着疲惫的身躯踏上这辆通往港湾的列车，我理应庆幸，每天往来与人流高峰恰好反方向，车上显得没这么拥挤，但做些什么打发这一段旅程的时光好呢？盯着车上的玻璃，看窗口黑洞洞的墙壁一闪而过，让思绪远离身体吗？还是像周遭的人一样做个低头族，刷刷微博朋友圈、玩游戏、看电影？但手机是我最不想拿起的工具，从包里拿出书，翻到上次停下遨游的地方。从什么时候开始，出门带包时总会放一本书，我已忘却，当习惯无意识成为一种本能后，总会忘了当时是怎么开始，是以一种什么心情在行动。在车上这种嘈杂、拥挤的环境看书，确是一种装逼的行为，或许有一个女孩走过来，问你“嗨，你在看什么？”然后你放下书，balabala开始愉快的聊天，也许如你所愿开始一段新的恋情，你看，在车上看书是一种泡妞的手段。即使不是如此狗血的桥段，你真看得下去吗？文字会变成一个个奇怪的符号，在空气中飘荡吗？当我拿起书，作者描述的世界在自己的世界中一一显现，外界的一切与我无关。</p>
<h1 id="chapter-2"><a href="#chapter-2" class="headerlink" title="chapter 2"></a>chapter 2</h1><p>最近看了好多篇文章关于人为什么阅读，我也在思考，自己为什么阅读。印象中小时候最早看的书是凡尔纳的《海底两万里》，跟着尼莫船长穿梭在奇妙的海底世界中，还有是江户川乱步的侦探小说，最喜欢他小说里的怪人二十面相。说到我喜爱的侦探小说，后来看的当然有横沟正史，现在又迷上在国内大热的东野圭吾。随后我也投身于应试教育中，随之看的书少之又少，现在想来，后悔在自己青葱岁月没多阅读几本书，人生的不同阶段阅读带来的是不同的感受。上了大学后，可支配的时间变多了，有那么一段时间常常泡图书馆，温习功课或随手找本书阅读。不是学霸的我，甘愿当占座的流氓，早出晚归，消失在同学朋友的世界中。记得一好友跟我说“觉得你很厉害，竟能如此坚持”，当时的我心里清楚，这是一种无奈，阅读是逃避。直到现在，书和阅读成为我生活中不可或缺的一部分，坐车、闲暇的时间或每个失眠的夜晚都会翻翻书，周末找间咖啡馆看一本书，一坐一下午。</p>
<h1 id="chapter-3"><a href="#chapter-3" class="headerlink" title="chapter 3"></a>chapter 3</h1><p>阅读等于为自己筑起一个避难所，几乎可以避免生命中所有的灾难。毛姆如是说，或许这也是我阅读的原因。生活中有很多磨难，工作上满是操蛋的事，但这种种在不久的将来回头看，都不算是事。只是在当时那烦心的时刻，或者心情很低落时，当负面情绪笼罩在我的天空时，我就逃进自己的避难所。阅读让我焦躁的心变得平静，想象作者的世界和我的世界合二为一，在这个奇妙的新世界里只有我一个人，但我并不孤独。后来阅读成了习惯，不再记得最初自己为什么阅读，不再思考阅读有什么意义。如果有人问我“阅读有什么用”，我会直接赠对方三个字“没毛用”。</p>

      
    </div>
    
  </div>
  
</article>






  
    <article id="post-loader-note" class="article article-type-post" itemscope itemprop="blogPost">
  
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/01/19/loader-note/">Node loader</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      <a href="/2015/01/19/loader-note/" class="article-date">
  <time datetime="2015-01-19T12:40:23.000Z" itemprop="datePublished">1月 19 2015</time>
</a>
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/nodejs/">nodejs</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/web/">web</a></li></ul>

      
<a href="/2015/01/19/loader-note/#comments" class="article-comment-link" data-thread-key="cilpbrf6p001tsgvg7puwfbn7" data-short-name="iceccb" style="display:none">comments</a>

    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="什么是loader"><a href="#什么是loader" class="headerlink" title="什么是loader"></a>什么是loader</h1><p>Node静态资源加载器。该模块通过两个步骤配合完成，代码部分根据环境生成标签。上线时，需要调用minify方法进行静态资源的合并和压缩。</p>
<pre><code>npm install loader
</code></pre><p>render：</p>
<pre><code>res.render(&apos;index&apos;, {
  Loader: require(&apos;loader&apos;)
});
</code></pre><p>或在app.js中：</p>
<pre><code>app.locals({
  Loader: require(&apos;loader&apos;)
});
</code></pre><p>模板文件：</p>
<pre><code>&lt;%- Loader(&quot;/public/javascripts/aa.js&quot;, &quot;/public/stylesheets/style.css&quot;)
.js(&quot;/public/javascripts/a.js&quot;)
.js(&quot;/public/javascripts/b.js&quot;)
.css(&quot;/public/stylesheets/style.css&quot;)
.done(assetsMap, prefix, combo) %&gt;
</code></pre><h1 id="环境判别"><a href="#环境判别" class="headerlink" title="环境判别"></a>环境判别</h1><p>环境判别由<code>done</code>方法的第三个参数决定，如果传入combo值，将决定选用线下版本(<code>false</code>)还是线上版本(<code>true</code>)。如果不传入第三个参数，将由环境变量决定。</p>
<pre><code>// 设置window下node环境变量
// 生产环境
set NODE_ENV=&quot;production&quot;
// 开发环境
set NODE_ENV=&quot;development&quot;
</code></pre><h1 id="线上输出"><a href="#线上输出" class="headerlink" title="线上输出"></a>线上输出</h1><p>在应用根目录下使用命令：</p>
<pre><code>// loader views_dir base_dir
loader ./views ./
</code></pre><p>会在根目录下生成assets.json文件：</p>
<pre><code>{&quot;/public/javascripts/aa.js&quot;:&quot;/public/javascripts/aa.2e4c08f9.min.js&quot;,&quot;/public/stylesheets/style.css&quot;:&quot;/public/stylesheets/style.b6b3ce7e.min.css&quot;}
</code></pre><p>在app.js中：</p>
<pre><code>app.locals({
  Loader: Loader,
  assets: require(&apos;./assets.json&apos;),
  mini_assets: true
});
</code></pre><p><code>done</code>方法参数为：</p>
<pre><code>.done(assets, &apos;&apos;, mini_assets)
</code></pre><p>html为：</p>
<pre><code>&lt;script src=&quot;/public/javascripts/aa.2e4c08f9.min.js&quot;&gt;&lt;/script&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;/public/stylesheets/style.b6b3ce7e.min.css&quot; media=&quot;all&quot;&gt;
</code></pre>
      
    </div>
    
  </div>
  
</article>






  
    <article id="post-ejs-note-4" class="article article-type-post" itemscope itemprop="blogPost">
  
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/01/19/ejs-note-4/">ejs学习笔记--nodejs（四）</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      <a href="/2015/01/19/ejs-note-4/" class="article-date">
  <time datetime="2015-01-19T12:23:31.000Z" itemprop="datePublished">1月 19 2015</time>
</a>
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ejs/">ejs</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/javascript/">javascript</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/nodejs/">nodejs</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/web/">web</a></li></ul>

      
<a href="/2015/01/19/ejs-note-4/#comments" class="article-comment-link" data-thread-key="cilpbrf6x0025sgvgs6i1xhog" data-short-name="iceccb" style="display:none">comments</a>

    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="ejs模板引擎"><a href="#ejs模板引擎" class="headerlink" title="ejs模板引擎"></a>ejs模板引擎</h2><p>因为express默认的模板引擎为jade，如果你想生成ejs的程序骨架，可以使用以下命令生成程序：</p>
<pre><code>express -e myapp
// 安装依赖包，这里是express和ejs
cd myapp &amp;&amp; npm install
</code></pre><p>在app.js</p>
<pre><code>// 设置视图的路径
app.set(&apos;views&apos;, path.join(__dirname, &apos;views&apos;));
// 设置模板引擎为ejs
app.set(&apos;view engine&apos;, &apos;ejs&apos;);
// 如果你的ejs模板后缀为.html
app.set(&apos;view engine&apos;, &apos;html&apos;);
app.engine(&apos;.html&apos;, require(&apos;ejs&apos;).__express)；
</code></pre><h3 id="一个简单的例子"><a href="#一个简单的例子" class="headerlink" title="一个简单的例子"></a>一个简单的例子</h3><p>在app.js中：</p>
<pre><code>app.get(&apos;/&apos;, function(req, res) {
  res.render(&apos;index&apos;, {title: &apos;Express Ejs&apos;, message: &apos;hello world!&apos;});
});
</code></pre><p>./views/index.ejs:</p>
<pre><code>&lt;!doctype html&gt;
&lt;html lang=&quot;zh_CN&quot;&gt;
&lt;head&gt;
  &lt;meta charset=&quot;UTF-8&quot;&gt;
  &lt;title&gt;&lt;%= title %&gt;&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;%= message%&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
        
          <p class="article-more-link">
            <a href="/2015/01/19/ejs-note-4/#more">继续阅读</a>
          </p>
        
      
    </div>
    
  </div>
  
</article>






  
    <article id="post-ejs-node-3" class="article article-type-post" itemscope itemprop="blogPost">
  
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/12/29/ejs-node-3/">ejs学习笔记-源码（三）</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      <a href="/2014/12/29/ejs-node-3/" class="article-date">
  <time datetime="2014-12-29T12:46:48.000Z" itemprop="datePublished">12月 29 2014</time>
</a>
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ejs/">ejs</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/javascript/">javascript</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/web/">web</a></li></ul>

      
<a href="/2014/12/29/ejs-node-3/#comments" class="article-comment-link" data-thread-key="cilpbrf75002gsgvgvw4ip5qj" data-short-name="iceccb" style="display:none">comments</a>

    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="EJS全局属性"><a href="#EJS全局属性" class="headerlink" title="EJS全局属性"></a>EJS全局属性</h1><p>EJS有三个比较重要的全局属性，分别为：</p>
<ul>
<li><code>cache</code>，设置模板是否缓存，默认值为<code>true</code><br>当你通过element或url创建EJS实例时，会在<code>EJS.templates_directory</code>对象中添加相应的属性（属性名为element的id或url），该属性为对象，其中<code>text</code>属性值为模板的内容。相应的有<code>EJS.get(path, cache)</code>和<code>EJS.update(path, template)</code>的方法获取、更新缓存</li>
<li><code>type</code>，设置模板的匹配符，默认为<code>&lt;</code></li>
<li><code>ext</code>，通过url加载模板的文件后缀，默认为<code>.ejs</code></li>
</ul>
<h1 id="EJS-Scanner类"><a href="#EJS-Scanner类" class="headerlink" title="EJS.Scanner类"></a>EJS.Scanner类</h1><p>我理解这个<code>Scanner</code>为一个解析器，用来解析EJS模板，它会解析模板非空的每行代码，然后对每行代码通过匹配符分隔后的字符串进行编译。匹配符为<code>/(&lt;%%)|(%%%%&gt;)|(&lt;%=)|(&lt;%#)|(&lt;%)|(%&gt;\n)|(%&gt;)|(\n)/</code>或<code>/(\[%%)|(%%\])|(\[%=)|(\[%#)|(\[%)|(%\]\n)|(%\])|(\n)/</code>。</p>
<h2 id="原型方法scan"><a href="#原型方法scan" class="headerlink" title="原型方法scan"></a>原型方法scan</h2><p>解析字符串，用分隔符<code>\n</code>将字符串分隔，保存到数组中，实现代码如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var source_split = rsplit(this.source, /\n/);&#10;for(var i=0; i&#60;source_split.length; i++) &#123;&#10; var item = source_split[i];&#10; this.scanline(item, regex, block);&#10;&#125;&#10;//&#22914;&#20197;&#19979;&#20195;&#30721;&#10;&#60;h1&#62;date_tag&#60;/h1&#62;&#10;&#60;div class=&#34;row&#34;&#62;&#60;%= date_tag(&#39;date&#39;, new Date())%&#62;&#60;/div&#62;&#10;&#60;% var a = &#39;hello&#39;; %&#62;&#10;//source_split&#25968;&#32452;&#20540;&#20026;&#10;[0] &#39;&#60;h1&#62;date_tag&#60;/h1&#62;&#39;&#10;[1] &#39;\n&#39;&#10;[2] &#39;&#60;div class=&#34;row&#34;&#62;&#60;%= date_tag(&#39;date&#39;, new Date())%&#62;&#60;/div&#62;&#39;&#10;[3] &#39;\n&#39;&#10;[4] &#39;&#60;% var a = &#39;hello&#39;; %&#62;&#39;</span><br></pre></td></tr></table></figure></p>
<h2 id="原型方法scanline"><a href="#原型方法scanline" class="headerlink" title="原型方法scanline"></a>原型方法scanline</h2><p>解析字符串，通过分隔符将字符串分隔，然后执行回调函数。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var line_split = rsplit(line, regex);&#10;for(var i=0; i &#60; line_split.length; i++) &#123;&#10;    var token = line_split[i];&#10;    if (token != null) &#123;&#10;        try&#123;&#10;            block(token, this);&#10;        &#125;catch(e)&#123;&#10;            throw &#123;type: &#39;EJS.Scanner&#39;, line: this.lines&#125;;&#10;        &#125;&#10;    &#125;&#10;&#125;&#10;&#33509;line = &#60;% var a = &#34;hello&#34;; %&#62;&#10;&#21017;line_split = [&#39;&#60;%&#39;, &#39; var a = &#34;hello&#34;&#39;; &#39;%&#62;&#39;]</span><br></pre></td></tr></table></figure></p>
<h2 id="EJS-Scanner-to-text"><a href="#EJS-Scanner-to-text" class="headerlink" title="EJS.Scanner.to_text"></a>EJS.Scanner.to_text</h2><p>如果参数是<code>Date</code>对象则返回<code>toDateString()</code>，若为其他对象返回<code>toString()</code>，否则返回空字符串。</p>
        
          <p class="article-more-link">
            <a href="/2014/12/29/ejs-node-3/#more">继续阅读</a>
          </p>
        
      
    </div>
    
  </div>
  
</article>






  
    <article id="post-google-style-guide" class="article article-type-post" itemscope itemprop="blogPost">
  
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/12/14/google-style-guide/">google代码风格指南</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      <a href="/2014/12/14/google-style-guide/" class="article-date">
  <time datetime="2014-12-14T13:32:30.000Z" itemprop="datePublished">12月 14 2014</time>
</a>
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/CSS/">CSS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/HTML/">HTML</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/web/">web</a></li></ul>

      
<a href="/2014/12/14/google-style-guide/#comments" class="article-comment-link" data-thread-key="cilpbrf6t001xsgvgvkhz3rlp" data-short-name="iceccb" style="display:none">comments</a>

    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p>本文翻译自<a href="https://google-styleguide.googlecode.com/svn/trunk/htmlcssguide.xml">Google HTML/CSS Style Guide</a></p>
<h1 id="通用风格规则"><a href="#通用风格规则" class="headerlink" title="通用风格规则"></a>通用风格规则</h1><h2 id="协议"><a href="#协议" class="headerlink" title="协议"></a>协议</h2><p><strong>嵌入资源时省略协议</strong>。嵌入的图像或其他媒体资源、样式表、脚本的url地址是“http:”、“https:”可省略协议部分。可使URL变成相对地址，避免混合内容问题并略微减少文件大小。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#60;!-- &#19981;&#25512;&#33616; --&#62;&#10;&#60;script src=&#34;http://www.google.com/js/gweb/analytics/autotrack.js&#34;&#62;&#60;/script&#62;&#10;.example &#123;&#10;  background: url(http://www.google.com/images/example);&#10;&#125;&#10;&#60;!-- &#25512;&#33616; --&#62;&#10;&#60;script src=&#34;//www.google.com/js/gweb/analytics/autotrack.js&#34;&#62;&#60;/script&#62;&#10;.example &#123;&#10;  background: url(//www.google.com/images/example);&#10;&#125;</span><br></pre></td></tr></table></figure></p>
<h1 id="通用格式话规则"><a href="#通用格式话规则" class="headerlink" title="通用格式话规则"></a>通用格式话规则</h1><h2 id="缩进"><a href="#缩进" class="headerlink" title="缩进"></a>缩进</h2><p><strong>使用2个空格缩进</strong>。不要使用tab或tab混合空格。</p>
<h2 id="大小写"><a href="#大小写" class="headerlink" title="大小写"></a>大小写</h2><p><strong>只使用小写</strong>。所有代码使用小写，包括HTML标签、属性、属性值（不包括text/CDATA）、CSS选择器、CSS属性、CSS属性值。当然字符串仍可以使用大写。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#60;!-- &#19981;&#25512;&#33616; --&#62;&#10;&#60;A HREF=&#34;/&#34;&#62;Home&#60;/A&#62;&#10;color: #E5E5E5;&#10;&#60;!-- &#25512;&#33616; --&#62;&#10;&#60;img src=&#34;google.png&#34; alt=&#34;Google&#34;&#62;&#10;color: #e5e5e5;</span><br></pre></td></tr></table></figure></p>
<h2 id="末尾空格"><a href="#末尾空格" class="headerlink" title="末尾空格"></a>末尾空格</h2><p><strong>移除所有末尾空格</strong>。它们是不必要并可能带来麻烦。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#60;!-- &#19981;&#25512;&#33616; --&#62;&#10;&#60;p&#62;What?_&#10;&#60;!-- &#25512;&#33616; --&#62;&#10;&#60;p&#62;Yes please.</span><br></pre></td></tr></table></figure></p>
        
          <p class="article-more-link">
            <a href="/2014/12/14/google-style-guide/#more">继续阅读</a>
          </p>
        
      
    </div>
    
  </div>
  
</article>






  
    <article id="post-ejs-note-2" class="article article-type-post" itemscope itemprop="blogPost">
  
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/12/06/ejs-note-2/">ejs学习笔记（二）</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      <a href="/2014/12/06/ejs-note-2/" class="article-date">
  <time datetime="2014-12-06T07:39:51.000Z" itemprop="datePublished">12月 6 2014</time>
</a>
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ejs/">ejs</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/javascript/">javascript</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/web/">web</a></li></ul>

      
<a href="/2014/12/06/ejs-note-2/#comments" class="article-comment-link" data-thread-key="cilpbrf71002bsgvgum91nlwt" data-short-name="iceccb" style="display:none">comments</a>

    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="视图工具"><a href="#视图工具" class="headerlink" title="视图工具"></a>视图工具</h1><p>EJS封装了一些视图工具插件，提供创建常用视图（如link，form）的快捷方式，让你的代码更简明扼要、更易懂。</p>
<h2 id="tag-tag-html-options-end"><a href="#tag-tag-html-options-end" class="headerlink" title="tag(tag, html_options, end)"></a>tag(tag, html_options, end)</h2><p>创建一个标签，<code>tag</code>为标签名，<code>html_options</code>为标签的属性值，<code>end</code>参数可选，设置标签的结束符，缺省为’&gt;’。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#60;%= tag(&#39;div&#39;, &#123;id: &#39;divElm&#39;, class=&#39;row&#39;&#125;)%&#62;&#10;//&#29983;&#25104;&#20197;&#19979;html&#10;&#60;div id=&#34;divElm&#34; class=&#34;row&#34;&#62;&#60;/div&#62;</span><br></pre></td></tr></table></figure></p>
<p>不过上面的代码在IE会报错，在EJS源码里是这么说的<em>special case because “class” is a reserved word in IE</em>，所以如果要设置class属性，则<code>&lt;%= tag(&#39;div&#39;, {id: &#39;divElm&#39;, Class=&#39;row&#39;})%&gt;</code></p>
<h2 id="start-tag-for-tag-html-options"><a href="#start-tag-for-tag-html-options" class="headerlink" title="start_tag_for(tag, html_options)"></a>start_tag_for(tag, html_options)</h2><p>创建一个标签的开始<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#60;%= start_tag_for(&#39;div&#39;, &#123;id: &#39;divElm&#39;, class=&#39;row&#39;&#125;)%&#62;&#10;//&#30456;&#24403;&#20110;&#10;&#60;%= tag(&#39;div&#39;, &#123;id: &#39;divElm&#39;, class=&#39;row&#39;&#125;)%&#62;</span><br></pre></td></tr></table></figure></p>
<h2 id="tag-end-tag"><a href="#tag-end-tag" class="headerlink" title="tag_end(tag)"></a>tag_end(tag)</h2><p>创建标签的结束<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#60;%= tag_end(&#39;div&#39;)%&#62;&#10;//&#29983;&#25104;&#20197;&#19979;html&#10;&#60;/div&#62;</span><br></pre></td></tr></table></figure></p>
<h2 id="single-tag-for-tag-html-options"><a href="#single-tag-for-tag-html-options" class="headerlink" title="single_tag_for(tag, html_options)"></a>single_tag_for(tag, html_options)</h2><p>创建一个自封闭标签，如img，input。但的HTML5的规范里，标签可以不闭合，关于闭不闭合，<em>伯乐在线</em>有篇文章写得挺清楚的：<a href="http://blog.jobbole.com/61514/">http://blog.jobbole.com/61514/</a>。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#60;%= single_tag_for(&#39;img&#39;, &#123;id: &#39;imgElm&#39;, src=&#39;image.jpg&#39;&#125;)%&#62;&#10;//&#30456;&#24403;&#20110;&#10;&#60;%= tag(&#39;img&#39;, &#123;id: &#39;imgElm&#39;, src=&#39;image.jpg&#39;&#125;, &#39;/&#62;&#39;)%&#62;</span><br></pre></td></tr></table></figure></p>
        
          <p class="article-more-link">
            <a href="/2014/12/06/ejs-note-2/#more">继续阅读</a>
          </p>
        
      
    </div>
    
  </div>
  
</article>






  
  
    <nav id="page-nav">
      <a class="extend prev" rel="prev" href="/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/3/">Next &raquo;</a>
    </nav>
  
</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title widget-title-category">分类</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/前端/">前端</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/学习笔记/">学习笔记</a><span class="category-list-count">9</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/读书/">读书</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/随笔/">随笔</a><span class="category-list-count">8</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title widget-title-recent">最近</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2016/03/13/console-note/">console调试简介</a>
          </li>
        
          <li>
            <a href="/2016/02/29/webpack-note-1/">webpack入门</a>
          </li>
        
          <li>
            <a href="/2016/02/29/react-note-2/">React实践（一）</a>
          </li>
        
          <li>
            <a href="/2016/02/27/react-note-1/">React入门</a>
          </li>
        
          <li>
            <a href="/2016/02/26/suibi-20160226/">婚姻</a>
          </li>
        
      </ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title widget-title-tag">标签</h3>
    <div class="widget tagcloud">
      <a href="/tags/CSS/" style="font-size: 10px;">CSS</a> <a href="/tags/HTML/" style="font-size: 10px;">HTML</a> <a href="/tags/ejs/" style="font-size: 16px;">ejs</a> <a href="/tags/javascript/" style="font-size: 16px;">javascript</a> <a href="/tags/language/" style="font-size: 10px;">language</a> <a href="/tags/nodejs/" style="font-size: 12px;">nodejs</a> <a href="/tags/web/" style="font-size: 20px;">web</a> <a href="/tags/电影/" style="font-size: 14px;">电影</a> <a href="/tags/话剧/" style="font-size: 10px;">话剧</a> <a href="/tags/读书笔记/" style="font-size: 10px;">读书笔记</a> <a href="/tags/读后感/" style="font-size: 14px;">读后感</a> <a href="/tags/随笔/" style="font-size: 18px;">随笔</a>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2016 Ice Chan<br>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">首页</a>
  
    <a href="/archives" class="mobile-nav-link">博文</a>
  
</nav>
    
<script src="/js/jquery-1.9.1.min.js" type="text/javascript"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">
  <script src="/fancybox/jquery.fancybox.pack.js" type="text/javascript"></script>


<script src="/js/script.js" type="text/javascript"></script>

  </div>
</body>
</html>